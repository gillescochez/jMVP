function jMVP(t,e,o){this.oModel=new jMVP.Model(t),this.oView=new jMVP.View(e),this.oPresenter=new jMVP.Presenter(o,this.oView,this.oModel)}jMVP.CSS_PREFIX="jmvp-",jMVP.load=function(t,e){console.log(t,e)},jMVP.oViews={},jMVP.view=function(t,e){jMVP.oViews[t]=e},jMVP.oModels={},jMVP.model=function(t,e){jMVP.oModels[t]=e},jMVP.oPresenters={},jMVP.presenter=function(t,e){jMVP.oPresenters[t]=e},jMVP.each=function(t,e,o){var n,i;if(t.constructor===Object&&t.constructor!==Array)for(i in t)t[i]&&e.apply(o,[i,t[i]]);else("string"==typeof t||t instanceof Array)&&(n="string"==typeof t?t.split(""):t,n.forEach(function(t,n){e.apply(o,[t,n])}))},jMVP.Model=function(t){jMVP.each(t,function(e){jMVP.Model.dataBind(this,t,e)},this)},jMVP.Model.dataBind=function(t,e,o){t[o]=new jMVP.Data(e[o]),t[o].onValueUpdated=function(t){e[o]=t}},jMVP.Data=function(t){this.vValue=t},jMVP.Data.prototype.setValue=function(t){this.vValue=t,this.onValueUpdated(this.vValue)},jMVP.Data.prototype.getValue=function(){return this.vValue},jMVP.Data.prototype.onValueUpdated=function(){},jMVP.Presenter=function(t,e,o){this.oMap={},this.oView=e||null,this.oModel=o||null,jMVP.each(t,function(t,e){this.oMap[t]=e,this.oView&&this.bindToView(t)},this)},jMVP.Presenter.prototype.bindToView=function(t){var e=this.oView,o=this.oModel;jMVP.each(this.oMap[t],function(n,i){var s=jMVP.dom(this.oView.eDomView).getByClass(jMVP.CSS_PREFIX+t);jMVP.dom(s).on(n,function(t){i.apply(s,[t,o,e])})},this)},jMVP.Presenter.prototype.routeEvent=function(t){var e,o=t.target;jMVP.each(-1!==o.className.indexOf(" ")?o.className.split(" "):[o.className],function(n){"jMVP"===n.substring(0,4)&&(e=n.substring(5,n.length),this.oMap.hasOwnProperty(e)&&this.oMap[e].hasOwnProperty(t.type)&&this.oMap[e][t.type].apply(o,[t,this.oView,this.oModel]))},this)},jMVP.View=function(t){this.oRawView=t,this.oMap={},this.eDomView=jMVP.View.objectToElement(this.oRawView,this.oMap)},jMVP.View.prototype.render=function(t){t.appendChild(this.eDomView),this.eDomView=t.childNodes[t.childNodes.length-1]},jMVP.View.prototype.update=function(t,e){jMVP.each(this.oMap[t],function(t,o){"attributes"===t||"classNames"===t?jMVP.each(o,function(o,n){jMVP.View.hooks[t](n,e,o)}):jMVP.View.hooks[t](o,e)},this)},jMVP.View.hooks={text:function(t,e){jMVP.dom(t).text(e)},html:function(t,e){jMVP.dom(t).html(e)},visible:function(){},attributes:function(t,e,o){jMVP.dom(t)[(e===!1||null===e?"rm":"set")+"Attr"](o,e)},classNames:function(t,e,o){jMVP.dom(t)[(e?"add":"remove")+"Class"](o)}},jMVP.View.objectToElement=function(t,e,o){var n=o||document.createElement("div");return jMVP.each(t,function(t,o){var i=document.createElement(o.tag||"div");i.className=jMVP.CSS_PREFIX+t,jMVP.each(jMVP.View.hooks,function(t){o[t]&&("attributes"===t||"classNames"===t?jMVP.each(o[t],function(o,n){e[n]||(e[n]={}),e[n][t]||(e[n][t]={}),e[n][t][o]||(e[n][t][o]=[]),e[n][t][o].push(i)}):(e[o[t]]||(e[o[t]]={}),e[o[t]][t]||(e[o[t]][t]=[]),e[o[t]][t].push(i)))}),jMVP.View.viewFragmentHasChildren(o)&&jMVP.View.objectToElement(o,e,i),n.appendChild(i)}),n},jMVP.View.viewFragmentHasChildren=function(t){var e=!1;return jMVP.each(t,function(t){e=!(jMVP.View.hooks[t]||"tag"===t)}),e},jMVP.dom=function(t){return new jMVP.dom.Wrap(t)},jMVP.dom.Wrap=function(t){if(!t)throw"jMVP.dom.Wrap requires a node or node list object";return this.aNodes=t[1]?Array.prototype.slice.call(t):t[0]?t:[t],this},jMVP.dom.Wrap.prototype.each=function(t){return jMVP.each(this.aNodes,function(e){t.apply(e)}),this},jMVP.dom.Wrap.prototype.getByClass=function(t){return jMVP.dom.getElementByClassName(t,this.aNodes[0])},jMVP.dom.Wrap.prototype.on=function(t,e){return this.each(function(){jMVP.dom.on(this,t,e)})},jMVP.dom.Wrap.prototype.off=function(t,e){return this.each(function(){jMVP.dom.off(this,t,e)})},jMVP.dom.Wrap.prototype.addClass=function(t){return this.each(function(){this.className+=" "+t})},jMVP.dom.Wrap.prototype.removeClass=function(t){return this.each(function(){this.className=void 0!==this.className?this.className.replace(RegExp(" "+t,"gi"),""):""})},jMVP.dom.Wrap.prototype.text=function(t){return this.each(function(){this[jMVP.dom.INNER_TEXT]=t})},jMVP.dom.Wrap.prototype.html=function(t){return this.each(function(){this.innerHTML=t})},jMVP.dom.Wrap.prototype.setAttr=function(t,e){return this.each(function(){this.setAttribute(t,e)})},jMVP.dom.Wrap.prototype.rmAttr=function(t){return this.each(function(){this.removeAttribute(t)})},jMVP.dom.DIV=document.createElement("div"),jMVP.dom.INNER_TEXT="innerText"in jMVP.dom.DIV?"innerText":"textContent",jMVP.dom.on=jMVP.dom.DIV.addEventListener?function(t,e,o){t.addEventListener(e,o,!1)}:function(t,e,o){t.attachEvent("on"+e,o)},jMVP.dom.off=jMVP.dom.DIV.removeEventListener?function(t,e,o){t.removeEventListener(e,o)}:function(t,e,o){t.detachEvent("on"+e,o)},jMVP.dom.getElementByClassName=jMVP.dom.DIV.querySelector?function(t,e){return e.querySelector("."+t)}:function(t,e){var o=[];return jMVP.dom(e.getElementsByTagName("*")).each(function(){return-1!==this.className.indexOf(t)?(o.push(this),void 0):void 0}),o[0]};